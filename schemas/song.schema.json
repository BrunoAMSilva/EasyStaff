{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Song notation schema",
    "description": "Schema for validating song objects used by the piano app. Ensures staffs with names and a notation string composed of tokens (notes, chords, bracketed groups, and rests).",
    "type": "object",
    "required": [
        "staffs"
    ],
    "properties": {
            "$schema": {
                "type": "string",
                "description": "Optional JSON Schema declaration URI for editors that support in-file $schema references. This property is accepted so files that include a $schema pointer validate against this schema."
            },
            "title": {
                "type": "string",
                "description": "Optional human-readable title for the song."
            },
            "timeSignature": {
                "type": "string",
                "description": "Optional time signature for the song, in the form 'beats/division' (e.g. '4/4', '3/4', '6/8').",
                "pattern": "^\\d+\\/\\d+$"
        },
        "staffs": {
            "type": "array",
            "minItems": 1,
            "items": {
                "type": "object",
                "required": [
                    "name",
                    "notation"
                ],
                "properties": {
                    "name": {
                        "type": "string",
                        "enum": [
                            "left",
                            "right"
                        ],
                        "description": "A short identifier for the staff (e.g. 'right', 'left')."
                    },
                    "notation": {
                        "type": "string",
                        "description": "Space-separated notation tokens. Tokens may be notes (e.g. do, re, mi), notes with trailing dashes for longer durations (do-, do--), chords (do-chord) optionally with trailing dashes, bracketed simultaneous groups ([do mi-]), or a single '.' for a rest.",
                                    "pattern": "^(?:\\s*(?:\\.|\\[(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?)(?:\\s+(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?))*\\]|(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?-chord(?:-+)?|(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?)))(?:\\s+(?:\\.|\\[(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?)(?:\\s+(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?))*\\]|(?:(?:do|re|mi|fa|sol|la|si)(?:[#b])?-chord(?:-+)?|(?:do|re|mi|fa|sol|la|si)(?:[#b])?(?:-+)?)))*\\s*$",
                                    "examples": [
                                        "do re re-- mi-- . [re fa] . do-- . . fa-- . si . [mi re] do",
                                        "do-chord--- re-chord--- do-chord---"
                                    ]
                    }
                },
                "additionalProperties": false
            }
        }
    },
    "additionalProperties": false,
    "examples": [
        {
            "staffs": [
                {
                    "name": "right",
                    "notation": "do re re-- mi-- . [re fa] . do-- . . fa-- . si . [mi re] do"
                },
                {
                    "name": "left",
                    "notation": "do-chord--- re-chord--- do-chord---"
                }
            ]
        }
    ]
}